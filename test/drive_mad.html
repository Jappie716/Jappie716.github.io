<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Drive Mad - Spelen</title>
    <style>
        body { background: #000; color: white; font-family: Arial; margin: 0; text-align: center; }
        iframe { width: 100%; height: 80vh; border: none; }
        .nav { padding: 10px; background: #222; display: flex; justify-content: space-around; align-items: center; }
        button { padding: 10px; cursor: pointer; background: #4caf50; border: none; color: white; border-radius: 5px; }
    </style>
</head>
<body>

<div class="nav">
    <button onclick="window.location.href='index.html'">â¬… Terug naar Home</button>
    <div id="userInfo">Laden...</div>
    <button onclick="saveScore()">Score Opslaan</button>
</div>

<iframe src="https://fancade.com/web/?DriveMad" id="gameFrame"></iframe>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // Zelfde config als index.html
  const firebaseConfig = {
    apiKey: "AIzaSyA0K4geAuueVfiItB_98-LkqRTnpYNUNvM",
    authDomain: "gameparadise-80490.firebaseapp.com",
    projectId: "gameparadise-80490",
    storageBucket: "gameparadise-80490.firebasestorage.app",
    messagingSenderId: "335620903527",
    appId: "1:335620903527:web:1bc1e01a386bf6e4e7fac2"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  auth.onAuthStateChanged(user => {
    if (!user) {
      window.location.href = "index.html"; // Niet ingelogd? Terug naar login!
    } else {
      document.getElementById("userInfo").innerText = "Speler: " + user.email;
    }
  });

  // Voorbeeld van hoe je data opslaat in Firebase Cloud Firestore
  function saveScore() {
    const user = auth.currentUser;
    if (user) {
      db.collection("scores").doc(user.uid).set({
        game: "Drive Mad",
        lastPlayed: new Date(),
        points: Math.floor(Math.random() * 100) // Hier zou je de echte score uit de game moeten halen
      })
      .then(() => alert("Voortgang opgeslagen in de cloud!"))
      .catch(e => console.error("Error: ", e));
    }
  }
</script>

</body>
</html>
