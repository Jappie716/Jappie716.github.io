<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Game Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#111;
  color:white;
  font-family:Arial;
  margin:0;
}
header {
  background:#222;
  padding:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
button {
  padding:10px;
  margin:5px;
  cursor:pointer;
}
#game-list button {
  display:block;
  width:100%;
  max-width:300px;
}
.hidden {
  display:none;
}
</style>
</head>

<body>
<header>
  <h2>ðŸŽ® Game Hub</h2>
  <div>
    <span id="user-email">Niet ingelogd</span>
    <button id="logout-btn">Logout</button>
  </div>
</header>

<main style="padding:20px">

<section id="login-section">
  <h3>Login</h3>
  <input id="email" placeholder="Email"><br><br>
  <input id="password" type="password" placeholder="Wachtwoord"><br><br>
  <button id="login-btn">Login</button>
  <button id="register-btn">Register</button>
  <p id="status"></p>
</section>

<section id="games-section" class="hidden">
  <h3>ðŸŽ¯ Games</h3>
  <div id="game-list"></div>
</section>

</main>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyA0K4geAuueVfiItB_98-LkqRTnpYNUNvM",
  authDomain: "gameparadise-80490.firebaseapp.com",
  projectId: "gameparadise-80490",
  storageBucket: "gameparadise-80490.firebasestorage.app",
  messagingSenderId: "335620903527",
  appId: "1:335620903527:web:1bc1e01a386bf6e4e7fac2"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

const email = document.getElementById("email");
const password = document.getElementById("password");
const loginBtn = document.getElementById("login-btn");
const registerBtn = document.getElementById("register-btn");
const logoutBtn = document.getElementById("logout-btn");

const loginSection = document.getElementById("login-section");
const gamesSection = document.getElementById("games-section");
const userEmail = document.getElementById("user-email");
const gameList = document.getElementById("game-list");

loginBtn.onclick = () => {
  auth.signInWithEmailAndPassword(email.value, password.value)
  .catch(e => alert(e.message));
};

registerBtn.onclick = () => {
  auth.createUserWithEmailAndPassword(email.value, password.value)
  .catch(e => alert(e.message));
};

logoutBtn.onclick = () => auth.signOut();

auth.onAuthStateChanged(user => {
  if (user) {
    userEmail.innerText = user.email;
    loginSection.classList.add("hidden");
    gamesSection.classList.remove("hidden");
    loadGames();
  } else {
    userEmail.innerText = "Niet ingelogd";
    loginSection.classList.remove("hidden");
    gamesSection.classList.add("hidden");
  }
});

async function loadGames() {
  gameList.innerHTML = "";
  const snap = await db.collection("games").get();

  snap.forEach(doc => {
    const game = doc.data();
    const btn = document.createElement("button");
    btn.innerText = "ðŸŽ® " + game.name;
    btn.onclick = () => window.location.href = game.url;
    gameList.appendChild(btn);
  });
}
</script>
</body>
</html>
