<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Game Paradise â€” Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body {
  margin: 0;
  background: #0b0f19;
  color: white;
  font-family: Arial, sans-serif;
  padding: 20px;
}

h1 {
  color: #60a5fa;
}

.panel {
  max-width: 600px;
  margin: auto;
  background: #111827;
  padding: 20px;
  border-radius: 10px;
}

input, select, button {
  width: 100%;
  padding: 8px;
  margin-top: 8px;
  border-radius: 5px;
  border: none;
}

button {
  background: #2563eb;
  color: white;
  cursor: pointer;
}

button:hover {
  background: #1d4ed8;
}

.game-list {
  margin-top: 20px;
}

.game-item {
  background: #1f2933;
  padding: 10px;
  border-radius: 5px;
  margin-bottom: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.delete-btn {
  background: #dc2626;
  border: none;
  padding: 5px 10px;
  border-radius: 5px;
  cursor: pointer;
}
</style>
</head>
<body>

<h1>ðŸ‘‘ Admin Panel</h1>

<div class="panel">
  <h3>Nieuwe game toevoegen</h3>

  <input id="titleInput" placeholder="Game titel">
  <input id="imageInput" placeholder="Afbeelding URL">
  <input id="linkInput" placeholder="Game link (bijv: games/greedy-snakes/index.html)">

  <select id="categoryInput">
    <option value="no-save">Niet-opslagbare games</option>
  </select>

  <button id="addGameBtn">Game toevoegen</button>

  <h3>Bestaande games</h3>
  <div id="gameList" class="game-list"></div>
</div>

<script>
/* ======================
   CONFIG
====================== */
const ADMIN_EMAILS = [
  "someoeneheilig@gmail.com"
];

const firebaseConfig = {
  apiKey: "AIzaSyA0K4geAuueVfiItB_98-LkqRTnpYNUNvM",
  authDomain: "gameparadise-80490.firebaseapp.com",
  projectId: "gameparadise-80490",
  storageBucket: "gameparadise-80490.firebasestorage.app",
  messagingSenderId: "335620903527",
  appId: "1:335620903527:web:1bc1e01a386bf6e4e7fac2"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

const titleInput = document.getElementById("titleInput");
const imageInput = document.getElementById("imageInput");
const linkInput = document.getElementById("linkInput");
const categoryInput = document.getElementById("categoryInput");
const gameList = document.getElementById("gameList");

/* ======================
   SECURITY
====================== */
auth.onAuthStateChanged(user => {
  if (!user || !ADMIN_EMAILS.includes(user.email)) {
    alert("Geen toegang");
    location.href = "index.html";
  } else {
    loadGames();
  }
});

/* ======================
   ADD GAME
====================== */
addGameBtn.onclick = () => {
  const title = titleInput.value.trim();
  const image = imageInput.value.trim();
  const link = linkInput.value.trim();
  const category = categoryInput.value;

  if (!title || !image || !link) {
    alert("Vul alles in");
    return;
  }

  db.collection("games").add({
    title,
    image,
    link,
    category
  }).then(() => {
    titleInput.value = "";
    imageInput.value = "";
    linkInput.value = "";
    loadGames();
  });
};

/* ======================
   LOAD GAMES
====================== */
function loadGames() {
  gameList.innerHTML = "";
  db.collection("games").get().then(snapshot => {
    snapshot.forEach(doc => {
      const div = document.createElement("div");
      div.className = "game-item";
      div.innerHTML = `
        <span>${doc.data().title}</span>
        <button class="delete-btn">Verwijder</button>
      `;

      div.querySelector("button").onclick = () => {
        if (confirm("Game verwijderen?")) {
          db.collection("games").doc(doc.id).delete().then(loadGames);
        }
      };

      gameList.appendChild(div);
    });
  });
}
</script>

</body>
</html>
